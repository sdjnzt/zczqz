import{d as _e,l as te,c as k,r as o,b as l,j as e,q as i,t as O,m as p,K as ge,ab as ve,ac as fe,I as be,o as _,a as s,X as D,w as Ke,z as Xe,e as M,B as re,C as ie,F as de,f as ue,k as u,a8 as N,O as pe,a6 as ce,W as Ge,V as ee,J as He,n as Qe,a5 as Ye}from"./vendor-DWoUwiRp.js";import{C as Ze,g as me,d as De}from"./data-Ct_aGHQ3.js";import{_ as et}from"./index-C1SeCsfj.js";const tt=_e({__name:"StaffTable",props:{data:{},loading:{type:Boolean}},emits:["view","edit","delete"],setup(he,{emit:W}){const T=W,g=d=>d==="在岗"?"success":"info",E=d=>{T("view",d)},B=d=>{T("edit",d)},A=d=>{T("delete",d)};return(d,R)=>{const f=o("el-table-column"),L=o("el-tag"),w=o("el-button"),I=o("el-button-group"),$=o("el-table"),v=be("loading");return te((_(),k($,{data:d.data,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:l(()=>[e(f,{type:"index",width:"50",align:"center"}),e(f,{prop:"name",label:"姓名",width:"120"}),e(f,{prop:"phone",label:"手机号",width:"120"}),e(f,{prop:"grid",label:"所属网格",width:"120"}),e(f,{prop:"area",label:"负责区域","min-width":"200","show-overflow-tooltip":""}),e(f,{prop:"status",label:"状态",width:"100"},{default:l(({row:h})=>[e(L,{type:g(h.status),effect:"dark"},{default:l(()=>[i(O(h.status),1)]),_:2},1032,["type"])]),_:1}),e(f,{label:"操作",width:"180",fixed:"right"},{default:l(({row:h})=>[e(I,null,{default:l(()=>[e(w,{type:"primary",icon:p(ge),onClick:q=>E(h)},null,8,["icon","onClick"]),e(w,{type:"warning",icon:p(ve),onClick:q=>B(h)},null,8,["icon","onClick"]),e(w,{type:"danger",icon:p(fe),onClick:q=>A(h)},null,8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[v,d.loading]])}}}),lt={class:"grid-container"},at={class:"card-content"},nt={class:"stat-content"},ot={class:"stat-title"},st={class:"stat-value"},rt={key:0,class:"stat-trend up"},it={class:"tab-header"},dt={class:"pagination-container"},ut={class:"tab-header"},pt={class:"pagination-container"},ct={class:"card-header"},mt={class:"card-header"},_t=_e({__name:"index",setup(he){const W=s(!1),T=s(!1),g=D({keyword:"",status:"",grid:""}),E=s(1),B=s(10),A=s(100),d=s(1),R=s(10),f=s(100),L=s("month"),w=s("month"),I=s([{label:"网格总数",value:"5",unit:"个",icon:"Location",type:"primary",trend:"up",trendText:"较上年增加1个",tag:"正常",tagType:"success"},{label:"网格人口",value:"6,080",unit:"人",icon:"User",type:"success",trend:"up",trendText:"较上年增长2.5%",tag:"正常",tagType:"success"},{label:"网格户数",value:"1,750",unit:"户",icon:"UserFilled",type:"warning",trend:"up",trendText:"较上年增加50户",tag:"正常",tagType:"success"},{label:"网格面积",value:"12.5",unit:"平方公里",icon:"Money",type:"info",trend:"up",trendText:"较上年增加0.5平方公里",tag:"正常",tagType:"success"}]),$=s("staff"),v=D({keyword:"",status:""}),h=[{value:"城前镇北区网格",label:"城前镇北区网格"},{value:"城前镇南区网格",label:"城前镇南区网格"},{value:"城前镇中心区网格",label:"城前镇中心区网格"},{value:"城前镇东区网格",label:"城前镇东区网格"},{value:"城前镇西区网格",label:"城前镇西区网格"},{value:"城前镇农业园区网格",label:"城前镇农业园区网格"}],q=s([{id:1,name:"张志强",phone:"15865432198",grid:"城前镇北区网格",area:"城前镇北区新村、北环路社区、光明小区",status:"在岗"},{id:2,name:"李建国",phone:"13776549821",grid:"城前镇南区网格",area:"城前镇南区幸福里、文昌社区、和平村",status:"在岗"},{id:3,name:"王文明",phone:"18932156478",grid:"城前镇中心区网格",area:"城前镇中心区政府广场、商业街、振兴路",status:"在岗"},{id:4,name:"赵丽娜",phone:"13798765432",grid:"城前镇东区网格",area:"城前镇东区阳光社区、东风村、长兴路",status:"请假"},{id:5,name:"孙志远",phone:"17865432109",grid:"城前镇西区网格",area:"城前镇西区西湖家园、康居苑、西郊村",status:"在岗"}]),ye=s([{id:1,title:"城前镇北区新村2号楼下水管道堵塞",type:"基础设施",grid:"城前镇北区网格",reporter:"居民王大明",reportTime:"2025-06-15 08:30",status:"待处理"},{id:2,title:"城前镇南区幸福里小区垃圾清运不及时",type:"环境卫生",grid:"城前镇南区网格",reporter:"网格员李建国",reportTime:"2025-06-14 14:20",status:"处理中"},{id:3,title:"城前镇中心区商业街店铺与居民噪音纠纷",type:"矛盾纠纷",grid:"城前镇中心区网格",reporter:"商户张老板",reportTime:"2025-06-13 09:15",status:"已完成"},{id:4,title:"城前镇东区阳光社区5栋电线老化需更换",type:"安全隐患",grid:"城前镇东区网格",reporter:"物业刘经理",reportTime:"2025-06-12 11:40",status:"待处理"},{id:5,title:"城前镇西区西湖家园公共健身设施损坏",type:"基础设施",grid:"城前镇西区网格",reporter:"居民老张",reportTime:"2025-06-11 16:50",status:"处理中"},{id:6,title:"城前镇中心区振兴路夜市摊位扰民投诉",type:"矛盾纠纷",grid:"城前镇中心区网格",reporter:"居民李大爷",reportTime:"2025-06-10 19:25",status:"待处理"},{id:7,title:"城前镇北区光明小区雨后积水严重",type:"基础设施",grid:"城前镇北区网格",reporter:"网格员张志强",reportTime:"2025-06-09 08:30",status:"处理中"},{id:8,title:"城前镇农业园区智慧农业区灌溉系统故障",type:"基础设施",grid:"城前镇农业园区网格",reporter:"工作人员小李",reportTime:"2025-06-08 10:10",status:"已完成"},{id:9,title:"城前镇东区长兴路路灯不亮",type:"基础设施",grid:"城前镇东区网格",reporter:"居民陈大姐",reportTime:"2025-06-07 17:20",status:"待处理"},{id:10,title:"城前镇西区康居苑小区门禁系统故障",type:"安全隐患",grid:"城前镇西区网格",reporter:"物业王经理",reportTime:"2025-06-06 12:00",status:"处理中"}]),J=s(null),K=s(null);let P=null,j=null;const we=n=>{switch(n){case"待处理":return"warning";case"处理中":return"primary";case"已完成":return"success";default:return"info"}},X=()=>{re(()=>{if(!J.value)return;P&&P.dispose(),P=ie(J.value);const n={title:{text:"事件类型分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",padding:5},series:[{name:"事件类型",type:"pie",radius:["40%","70%"],center:["50%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:42,name:"基础设施"},{value:18,name:"环境卫生"},{value:15,name:"矛盾纠纷"},{value:12,name:"安全隐患"},{value:8,name:"其他"}]}]};P.setOption(n)})},G=()=>{re(()=>{if(!K.value)return;j&&j.dispose(),j=ie(K.value);const n={title:{text:"事件处理趋势",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:["4月","5月","6月","7月","8月","9月"],axisTick:{alignWithLabel:!0}},yAxis:{type:"value",name:"事件数量"},series:[{name:"事件数量",type:"line",smooth:!0,data:[45,52,63,58,71,65],markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},areaStyle:{opacity:.3},lineStyle:{width:3},itemStyle:{borderWidth:2}}]};j.setOption(n)})},Ve=n=>{B.value=n},Ce=n=>{E.value=n},ke=n=>{R.value=n},Te=n=>{d.value=n},xe=()=>{console.log("搜索条件:",g)},Se=()=>{g.keyword="",g.grid=""},Ue=()=>{c.value="新增网格员",Object.keys(V).forEach(n=>{V[n]=n==="status"?"在岗":""}),x.value=!0},ze=n=>{c.value="查看网格员",Object.keys(V).forEach(t=>{V[t]=n[t]}),x.value=!0},Ee=n=>{c.value="编辑网格员",Object.keys(V).forEach(t=>{V[t]=n[t]}),x.value=!0},Be=n=>{Ge.confirm(`确定要删除网格员"${n.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee.success("删除成功")}).catch(()=>{})},Le=()=>{console.log("搜索条件:",v)},Oe=()=>{v.keyword="",v.status=""},Re=()=>{console.log("新增事件")},$e=n=>{console.log("查看事件:",n)},qe=n=>{console.log("处理事件:",n)},Pe=n=>{console.log("删除事件:",n)};Ke([L,w],()=>{X(),G()});const je=n=>{n.paneName==="analysis"&&setTimeout(()=>{X(),G()},0)};Xe(()=>{X(),G()});const x=s(!1),c=s(""),V=D({name:"",manager:"",population:"",households:"",area:"",status:"正常"}),Fe={name:[{required:!0,message:"请输入网格名称",trigger:"blur"}],manager:[{required:!0,message:"请输入网格长姓名",trigger:"blur"}],population:[{required:!0,message:"请输入人口数量",trigger:"blur"}],households:[{required:!0,message:"请输入户数",trigger:"blur"}],area:[{required:!0,message:"请输入面积",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},Me=n=>{var t;if(c.value==="新增网格")me.add(n),ee.success("添加成功");else if(c.value==="编辑网格"){const S=(t=De.value.find(H=>H.name===n.name))==null?void 0:t.id;S&&(me.update(S,n),ee.success("更新成功"))}x.value=!1};return(n,t)=>{const S=o("el-icon"),H=o("Top"),Ne=o("Bottom"),F=o("el-card"),Q=o("el-col"),le=o("el-row"),C=o("el-input"),m=o("el-form-item"),U=o("el-option"),Y=o("el-select"),b=o("el-button"),ae=o("el-form"),ne=o("el-pagination"),Z=o("el-tab-pane"),y=o("el-table-column"),We=o("el-tag"),Ae=o("el-button-group"),Ie=o("el-table"),z=o("el-radio-button"),oe=o("el-radio-group"),Je=o("el-tabs"),se=be("loading");return _(),M("div",lt,[e(le,{gutter:20,class:"grid-overview"},{default:l(()=>[(_(!0),M(de,null,ue(I.value,(a,r)=>(_(),k(Q,{xs:24,sm:12,md:6,key:r},{default:l(()=>[e(F,{shadow:"hover",class:"overview-card"},{default:l(()=>[u("div",at,[e(S,{class:He(["card-icon",a.type])},{default:l(()=>[(_(),k(Qe(a.icon)))]),_:2},1032,["class"]),u("div",nt,[u("div",ot,O(a.label),1),u("div",st,O(a.value),1),a.trend?(_(),M("div",rt,[a.trend==="up"?(_(),k(S,{key:0},{default:l(()=>[e(H)]),_:1})):(_(),k(S,{key:1},{default:l(()=>[e(Ne)]),_:1})),i(" "+O(a.trendText),1)])):Ye("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),te((_(),k(F,{class:"grid-management",shadow:"hover"},{default:l(()=>[e(Je,{modelValue:$.value,"onUpdate:modelValue":t[10]||(t[10]=a=>$.value=a),class:"custom-tabs",onTabClick:je},{default:l(()=>[e(Z,{label:"网格员管理",name:"staff"},{default:l(()=>[u("div",it,[e(ae,{inline:!0,model:g,class:"search-form"},{default:l(()=>[e(m,null,{default:l(()=>[e(C,{modelValue:g.keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>g.keyword=a),placeholder:"姓名/手机号",clearable:"","prefix-icon":p(N)},null,8,["modelValue","prefix-icon"])]),_:1}),e(m,null,{default:l(()=>[e(Y,{modelValue:g.grid,"onUpdate:modelValue":t[1]||(t[1]=a=>g.grid=a),placeholder:"所属网格",clearable:""},{default:l(()=>[(_(),M(de,null,ue(h,a=>e(U,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(b,{type:"primary",icon:p(N),onClick:xe},{default:l(()=>t[12]||(t[12]=[i("搜索")])),_:1,__:[12]},8,["icon"]),e(b,{icon:p(pe),onClick:Se},{default:l(()=>t[13]||(t[13]=[i("重置")])),_:1,__:[13]},8,["icon"])]),_:1})]),_:1},8,["model"]),e(b,{type:"primary",icon:p(ce),onClick:Ue},{default:l(()=>t[14]||(t[14]=[i("新增网格员")])),_:1,__:[14]},8,["icon"])]),e(tt,{data:q.value,loading:T.value,onView:ze,onEdit:Ee,onDelete:Be},null,8,["data","loading"]),u("div",dt,[e(ne,{"current-page":E.value,"onUpdate:currentPage":t[2]||(t[2]=a=>E.value=a),"page-size":B.value,"onUpdate:pageSize":t[3]||(t[3]=a=>B.value=a),"page-sizes":[10,20,50,100],total:A.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ve,onCurrentChange:Ce},null,8,["current-page","page-size","total"])])]),_:1}),e(Z,{label:"事件处理",name:"events"},{default:l(()=>[u("div",ut,[e(ae,{inline:!0,model:v,class:"search-form"},{default:l(()=>[e(m,null,{default:l(()=>[e(C,{modelValue:v.keyword,"onUpdate:modelValue":t[4]||(t[4]=a=>v.keyword=a),placeholder:"事件标题",clearable:"","prefix-icon":p(N)},null,8,["modelValue","prefix-icon"])]),_:1}),e(m,null,{default:l(()=>[e(Y,{modelValue:v.status,"onUpdate:modelValue":t[5]||(t[5]=a=>v.status=a),placeholder:"处理状态",clearable:""},{default:l(()=>[e(U,{label:"待处理",value:"pending"}),e(U,{label:"处理中",value:"processing"}),e(U,{label:"已完成",value:"completed"})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:l(()=>[e(b,{type:"primary",icon:p(N),onClick:Le},{default:l(()=>t[15]||(t[15]=[i("搜索")])),_:1,__:[15]},8,["icon"]),e(b,{icon:p(pe),onClick:Oe},{default:l(()=>t[16]||(t[16]=[i("重置")])),_:1,__:[16]},8,["icon"])]),_:1})]),_:1},8,["model"]),e(b,{type:"primary",icon:p(ce),onClick:Re},{default:l(()=>t[17]||(t[17]=[i("新增事件")])),_:1,__:[17]},8,["icon"])]),te((_(),k(Ie,{data:ye.value,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:l(()=>[e(y,{type:"index",width:"50",align:"center"}),e(y,{prop:"title",label:"事件标题","min-width":"200","show-overflow-tooltip":""}),e(y,{prop:"type",label:"事件类型",width:"120"}),e(y,{prop:"grid",label:"所属网格",width:"120"}),e(y,{prop:"reporter",label:"上报人",width:"120"}),e(y,{prop:"reportTime",label:"上报时间",width:"180"}),e(y,{prop:"status",label:"状态",width:"100"},{default:l(({row:a})=>[e(We,{type:we(a.status),effect:"dark"},{default:l(()=>[i(O(a.status),1)]),_:2},1032,["type"])]),_:1}),e(y,{label:"操作",width:"180",fixed:"right"},{default:l(({row:a})=>[e(Ae,null,{default:l(()=>[e(b,{type:"primary",icon:p(ge),onClick:r=>$e(a)},null,8,["icon","onClick"]),e(b,{type:"warning",icon:p(ve),onClick:r=>qe(a)},null,8,["icon","onClick"]),e(b,{type:"danger",icon:p(fe),onClick:r=>Pe(a)},null,8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[se,T.value]]),u("div",pt,[e(ne,{"current-page":d.value,"onUpdate:currentPage":t[6]||(t[6]=a=>d.value=a),"page-size":R.value,"onUpdate:pageSize":t[7]||(t[7]=a=>R.value=a),"page-sizes":[10,20,50,100],total:f.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ke,onCurrentChange:Te},null,8,["current-page","page-size","total"])])]),_:1}),e(Z,{label:"统计分析",name:"analysis"},{default:l(()=>[e(le,{gutter:20},{default:l(()=>[e(Q,{xs:24,sm:24,md:12},{default:l(()=>[e(F,{shadow:"hover",class:"chart-card"},{header:l(()=>[u("div",ct,[t[21]||(t[21]=u("span",null,"事件类型分布",-1)),e(oe,{modelValue:L.value,"onUpdate:modelValue":t[8]||(t[8]=a=>L.value=a),size:"small"},{default:l(()=>[e(z,{label:"week"},{default:l(()=>t[18]||(t[18]=[i("本周")])),_:1,__:[18]}),e(z,{label:"month"},{default:l(()=>t[19]||(t[19]=[i("本月")])),_:1,__:[19]}),e(z,{label:"year"},{default:l(()=>t[20]||(t[20]=[i("全年")])),_:1,__:[20]})]),_:1},8,["modelValue"])])]),default:l(()=>[u("div",{class:"chart-container",ref_key:"eventTypeChartRef",ref:J},null,512)]),_:1})]),_:1}),e(Q,{xs:24,sm:24,md:12},{default:l(()=>[e(F,{shadow:"hover",class:"chart-card"},{header:l(()=>[u("div",mt,[t[25]||(t[25]=u("span",null,"事件处理趋势",-1)),e(oe,{modelValue:w.value,"onUpdate:modelValue":t[9]||(t[9]=a=>w.value=a),size:"small"},{default:l(()=>[e(z,{label:"week"},{default:l(()=>t[22]||(t[22]=[i("本周")])),_:1,__:[22]}),e(z,{label:"month"},{default:l(()=>t[23]||(t[23]=[i("本月")])),_:1,__:[23]}),e(z,{label:"year"},{default:l(()=>t[24]||(t[24]=[i("全年")])),_:1,__:[24]})]),_:1},8,["modelValue"])])]),default:l(()=>[u("div",{class:"chart-container",ref_key:"eventTrendChartRef",ref:K},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[se,W.value]]),e(Ze,{visible:x.value,"onUpdate:visible":t[11]||(t[11]=a=>x.value=a),title:c.value,"form-data":V,rules:Fe,onSubmit:Me},{default:l(({formData:a})=>[e(m,{label:"网格名称",prop:"name"},{default:l(()=>[e(C,{modelValue:a.name,"onUpdate:modelValue":r=>a.name=r,disabled:c.value==="查看网格"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),e(m,{label:"网格长",prop:"manager"},{default:l(()=>[e(C,{modelValue:a.manager,"onUpdate:modelValue":r=>a.manager=r,disabled:c.value==="查看网格"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),e(m,{label:"人口",prop:"population"},{default:l(()=>[e(C,{modelValue:a.population,"onUpdate:modelValue":r=>a.population=r,disabled:c.value==="查看网格"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),e(m,{label:"户数",prop:"households"},{default:l(()=>[e(C,{modelValue:a.households,"onUpdate:modelValue":r=>a.households=r,disabled:c.value==="查看网格"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),e(m,{label:"面积",prop:"area"},{default:l(()=>[e(C,{modelValue:a.area,"onUpdate:modelValue":r=>a.area=r,disabled:c.value==="查看网格"},{append:l(()=>t[26]||(t[26]=[i("平方公里")])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024),e(m,{label:"状态",prop:"status"},{default:l(()=>[e(Y,{modelValue:a.status,"onUpdate:modelValue":r=>a.status=r,disabled:c.value==="查看网格",style:{width:"100%"}},{default:l(()=>[e(U,{label:"正常",value:"正常"}),e(U,{label:"异常",value:"异常"})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:1},8,["visible","title","form-data"])])}}}),bt=et(_t,[["__scopeId","data-v-2e406cc1"]]);export{bt as default};
