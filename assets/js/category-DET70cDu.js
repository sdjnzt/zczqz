import{d as me,ag as ye,ah as he,ai as be,aj as we,ak as Ce,al as ke,a as g,i as ze,w as q,A as De,e as R,j as l,k as n,b as a,r as i,D as Se,q as u,F as xe,f as Ve,z as Le,c as A,t as v,h as I,m as w,Q as Te,ad as Q,Z as Me,a7 as Y,am as Re,aa as $e,W as Z,u as Ne,g as Pe,o as k}from"./vendor-iaJEqiR6.js";import{_ as Ue}from"./index-BgQA1UYf.js";const Be={class:"policy-category-container"},We={class:"card-header"},je={class:"header-actions"},Ee={class:"category-nav"},Ke={class:"category-list"},Fe={key:0,class:"current-category-info"},Oe={class:"category-description"},qe={class:"policy-title-container"},Ae={class:"policy-title-link"},Ie={class:"pagination-container"},Qe={class:"card-header"},Ye={class:"chart-actions"},Ze={class:"stats-details"},Ge={class:"stats-table"},He={class:"percent-bar-container"},Je={class:"percent-text"},Xe={class:"floating-actions"},et=me({__name:"category",setup(tt){ye([he,be,we,Ce,ke]);const G=Ne(),H=Pe(),m=g(1),C=g(10),x=g(0),z=g(""),_=g("all"),c=g("category"),D=[{label:"农业政策",value:"agriculture",description:"涵盖农业生产、农村发展、农民增收等方面的政策法规。"},{label:"教育政策",value:"education",description:"涉及教育改革、学校管理、教师队伍建设等方面的政策法规。"},{label:"医疗卫生",value:"healthcare",description:"包括医疗服务、公共卫生、疾病防控等方面的政策法规。"},{label:"社会保障",value:"social-security",description:"关于社会保险、社会救助、社会福利等方面的政策法规。"},{label:"财政金融",value:"finance",description:"涉及财政预算、金融服务、税收管理等方面的政策法规。"},{label:"城乡建设",value:"construction",description:"关于城乡规划、住房保障、基础设施等方面的政策法规。"},{label:"交通运输",value:"transportation",description:"包括道路交通、公共交通、物流运输等方面的政策法规。"},{label:"政务服务",value:"government",description:"关于行政审批、公共服务、政府信息公开等方面的政策法规。"}],$=[{label:"国家级",value:"national"},{label:"省级",value:"provincial"},{label:"市级",value:"city"},{label:"县级",value:"county"},{label:"镇级",value:"town"}],h=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],f=g([{id:1,title:"关于促进城前镇农业产业化发展的实施意见",summary:"为加快推进城前镇农业产业化发展，提升农业现代化水平，特制定本实施意见。",category:"agriculture",level:"town",publishDate:"2025-06-01",source:"邹城市城前镇人民政府",views:245},{id:2,title:"城前镇农村宅基地管理办法（试行）",summary:"规范城前镇农村宅基地管理，保障农民合法权益，促进农村和谐稳定。",category:"construction",level:"town",publishDate:"2025-06-20",source:"邹城市自然资源局",views:198},{id:3,title:"关于加强城前镇基层医疗服务体系建设的通知",summary:"加强基层医疗卫生服务体系建设，提高农村医疗服务质量和水平。",category:"healthcare",level:"city",publishDate:"2025-06-15",source:"邹城市卫健委",views:165},{id:4,title:"城前镇农业生产补贴政策实施细则",summary:"明确农业生产补贴政策的实施范围、申请条件、补贴标准和程序。",category:"agriculture",level:"town",publishDate:"2025-06-10",source:"邹城市财政局",views:320},{id:5,title:"城前镇义务教育优质均衡发展实施方案",summary:"推进城前镇义务教育优质均衡发展，缩小城乡教育差距。",category:"education",level:"county",publishDate:"2025-06-05",source:"邹城市教育局",views:185},{id:6,title:"关于加强城前镇乡村治理体系建设的指导意见",summary:"健全完善城前镇乡村治理体系，提升乡村治理能力和水平。",category:"social-security",level:"county",publishDate:"2025-06-01",source:"邹城市民政局",views:176},{id:7,title:"山东省耕地保护与质量提升行动方案",summary:"加强耕地保护，提升耕地质量，保障粮食安全。",category:"agriculture",level:"provincial",publishDate:"2025-06-15",source:"山东省农业农村厅",views:210},{id:8,title:"邹城市农村人居环境整治提升五年行动实施方案",summary:"改善农村人居环境，建设美丽宜居乡村。",category:"construction",level:"city",publishDate:"2025-06-10",source:"邹城市农业农村局",views:132},{id:9,title:"关于开展城前镇农村人居环境整治行动的通知",summary:"开展农村人居环境整治，提升农村生活品质。",category:"construction",level:"town",publishDate:"2025-06-05",source:"邹城市城前镇人民政府",views:156},{id:10,title:"城前镇新型农村合作医疗制度实施方案",summary:"完善新型农村合作医疗制度，提高农村医疗保障水平。",category:"healthcare",level:"town",publishDate:"2025-06-01",source:"邹城市城前镇人民政府",views:190},{id:11,title:"关于实施乡村振兴战略的指导意见",summary:"全面实施乡村振兴战略，加快推进农业农村现代化。",category:"agriculture",level:"national",publishDate:"2025-06-20",source:"中共中央、国务院",views:458},{id:12,title:"邹城市城乡一体化发展规划",summary:"推进城乡一体化发展，缩小城乡差距。",category:"construction",level:"city",publishDate:"2025-06-15",source:"邹城市发改委",views:178}]),V=g(null);let b=null;const N=ze(()=>{let t=[...f.value];if(_.value!=="all"&&(t=t.filter(r=>r.category===_.value)),z.value){const r=z.value.toLowerCase();t=t.filter(d=>d.title.toLowerCase().includes(r)||d.summary.toLowerCase().includes(r)||d.source.toLowerCase().includes(r))}x.value=t.length;const e=(m.value-1)*C.value,s=e+C.value;return t.slice(e,s)}),J=t=>{m.value=t},X=t=>{C.value=t,m.value=1},L=()=>{m.value=1},ee=()=>{m.value=1},P=t=>{H.push(`/policy/detail/${t}`)},te=t=>{Z.success(`正在下载: ${t.title}`)},U=t=>{const e=D.find(s=>s.value===t);return e?e.label:t},le=t=>{const e=D.find(s=>s.value===t);return e?e.description:""},ae=t=>{const e=$.find(s=>s.value===t);return e?e.label:t},T=t=>({agriculture:"success",education:"primary",healthcare:"info","social-security":"warning",finance:"danger",construction:"",transportation:"success",government:"info"})[t]||"",oe=t=>c.value==="category"?T(t.id):c.value==="level"?t.id==="town"?"success":"info":"",se=t=>t,ne=t=>{P(t.id)},re=()=>D.map((t,e)=>{const s=f.value.filter(d=>d.category===t.value).length,r=Math.round(s/f.value.length*100);return{id:t.value,name:t.label,value:s,percent:r,color:h[e%h.length]}}).sort((t,e)=>e.value-t.value),ie=()=>["2021","2022","2025","2024","2025"].map((e,s)=>{const r=f.value.filter(y=>y.publishDate.startsWith(e)).length,d=Math.round(r/f.value.length*100);return{id:e,name:e+"年",value:r,percent:d,color:h[s%h.length]}}).sort((e,s)=>s.value-e.value),ue=()=>$.map((t,e)=>{const s=f.value.filter(d=>d.level===t.value).length,r=Math.round(s/f.value.length*100);return{id:t.value,name:t.label,value:s,percent:r,color:h[e%h.length]}}).sort((t,e)=>e.value-t.value),B=()=>c.value==="category"?"政策分类统计":c.value==="year"?"政策年份统计":c.value==="level"?"政策级别统计":"",W=()=>c.value==="category"?re():c.value==="year"?ie():c.value==="level"?ue():[],j=()=>{if(!V.value)return;b||(b=Se(V.value));let t=W(),e=B();b.setOption({title:{text:e,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:t.map(s=>s.name)},series:[{name:"政策数量",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:t.map(s=>({name:s.name,value:s.value,itemStyle:{color:s.color}}))}]})};q(()=>G.query,t=>{t.id&&(_.value=t.id)},{immediate:!0}),q(c,()=>{j()});const ce=()=>{b==null||b.resize()},de=()=>{Z.success("正在下载分类数据...")},pe=()=>{window.scrollTo({top:0,behavior:"smooth"})};return De(()=>{x.value=f.value.length,setTimeout(()=>{j(),window.addEventListener("resize",ce)},200)}),(t,e)=>{const s=i("el-icon"),r=i("el-button"),d=i("el-input"),y=i("el-radio-button"),E=i("el-radio-group"),S=i("el-tag"),ve=i("el-empty"),p=i("el-table-column"),K=i("el-table"),_e=i("el-pagination"),F=i("el-card"),O=i("el-col"),fe=i("el-row"),M=i("el-tooltip");return k(),R("div",Be,[l(F,{class:"category-header-card"},{header:a(()=>[n("div",We,[e[6]||(e[6]=n("h2",null,"政策法规分类",-1)),n("div",je,[l(d,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=o=>z.value=o),placeholder:"输入关键词搜索分类",class:"search-input",clearable:"",onKeyup:Me(L,["enter"])},{prefix:a(()=>[l(s,null,{default:a(()=>[l(w(Y))]),_:1})]),append:a(()=>[l(r,{type:"primary",onClick:L,class:"search-btn"},{default:a(()=>e[5]||(e[5]=[u(" 搜索 ")])),_:1,__:[5]})]),_:1},8,["modelValue"])])])]),default:a(()=>[n("div",Ee,[l(E,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=o=>_.value=o),onChange:ee,size:"large"},{default:a(()=>[l(y,{label:"all"},{default:a(()=>e[7]||(e[7]=[u("全部")])),_:1,__:[7]}),(k(),R(xe,null,Ve(D,o=>l(y,{key:o.value,label:o.value},{default:a(()=>[u(v(o.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),n("div",Ke,[_.value!=="all"?(k(),R("div",Fe,[l(S,{type:T(_.value),effect:"dark",size:"large"},{default:a(()=>[u(v(U(_.value)),1)]),_:1},8,["type"]),n("div",Oe,v(le(_.value)),1)])):Le("",!0),N.value.length===0?(k(),A(ve,{key:1,description:"暂无相关政策"})):(k(),A(K,{key:2,data:N.value,style:{width:"100%"},onRowClick:ne,"header-cell-style":{background:"#f5f7fa",color:"#606266"},border:""},{default:a(()=>[l(p,{type:"index",width:"60",label:"序号",align:"center"}),l(p,{prop:"title",label:"标题","min-width":"300","show-overflow-tooltip":""},{default:a(o=>[n("div",qe,[n("span",Ae,v(o.row.title),1)])]),_:1}),l(p,{prop:"category",label:"分类",width:"120"},{default:a(o=>[l(S,{type:T(o.row.category),effect:"plain",size:"small"},{default:a(()=>[u(v(U(o.row.category)),1)]),_:2},1032,["type"])]),_:1}),l(p,{prop:"publishDate",label:"发布日期",width:"120",sortable:""},{default:a(o=>[u(v(se(o.row.publishDate)),1)]),_:1}),l(p,{prop:"level",label:"级别",width:"100"},{default:a(o=>[l(S,{size:"small",effect:"plain",type:o.row.level==="town"?"success":"info"},{default:a(()=>[u(v(ae(o.row.level)),1)]),_:2},1032,["type"])]),_:1}),l(p,{prop:"source",label:"发布机构",width:"180","show-overflow-tooltip":""}),l(p,{prop:"views",label:"阅读量",width:"100",sortable:"",align:"center"}),l(p,{label:"操作",width:"180",fixed:"right"},{default:a(o=>[l(r,{type:"primary",size:"small",onClick:I(ge=>P(o.row.id),["stop"])},{default:a(()=>[l(s,null,{default:a(()=>[l(w(Te))]),_:1}),e[8]||(e[8]=u(" 查看 "))]),_:2,__:[8]},1032,["onClick"]),l(r,{type:"success",size:"small",onClick:I(ge=>te(o.row),["stop"])},{default:a(()=>[l(s,null,{default:a(()=>[l(w(Q))]),_:1}),e[9]||(e[9]=u(" 下载 "))]),_:2,__:[9]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),n("div",Ie,[l(_e,{"current-page":m.value,"onUpdate:currentPage":e[2]||(e[2]=o=>m.value=o),"page-size":C.value,"onUpdate:pageSize":e[3]||(e[3]=o=>C.value=o),"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next, jumper",total:x.value,onSizeChange:X,onCurrentChange:J},null,8,["current-page","page-size","total"])])])]),_:1}),l(F,{class:"category-stats-card"},{header:a(()=>[n("div",Qe,[e[13]||(e[13]=n("h3",null,"政策分布统计",-1)),n("div",Ye,[l(E,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=o=>c.value=o),size:"small"},{default:a(()=>[l(y,{label:"category"},{default:a(()=>e[10]||(e[10]=[u("分类分布")])),_:1,__:[10]}),l(y,{label:"year"},{default:a(()=>e[11]||(e[11]=[u("年份分布")])),_:1,__:[11]}),l(y,{label:"level"},{default:a(()=>e[12]||(e[12]=[u("级别分布")])),_:1,__:[12]})]),_:1},8,["modelValue"])])])]),default:a(()=>[l(fe,{gutter:20},{default:a(()=>[l(O,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[n("div",{ref_key:"categoryChartRef",ref:V,class:"chart-container"},null,512)]),_:1}),l(O,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[n("div",Ze,[n("h4",null,v(B()),1),n("div",Ge,[l(K,{data:W(),"show-header":!1,border:!0,style:{width:"100%"}},{default:a(()=>[l(p,{prop:"name",label:"名称",width:"180"},{default:a(o=>[l(S,{type:oe(o.row),effect:"plain"},{default:a(()=>[u(v(o.row.name),1)]),_:2},1032,["type"])]),_:1}),l(p,{prop:"value",label:"数量",align:"center",width:"80"}),l(p,{prop:"percent",label:"百分比",align:"right"},{default:a(o=>[n("div",He,[n("div",{class:"percent-bar",style:Re({width:o.row.percent+"%",backgroundColor:o.row.color})},null,4),n("span",Je,v(o.row.percent)+"%",1)])]),_:1})]),_:1},8,["data"])])])]),_:1})]),_:1})]),_:1}),n("div",Xe,[l(M,{content:"筛选",placement:"left"},{default:a(()=>[l(r,{type:"primary",circle:"",class:"action-button",onClick:L},{default:a(()=>[l(s,null,{default:a(()=>[l(w(Y))]),_:1})]),_:1})]),_:1}),l(M,{content:"下载",placement:"left"},{default:a(()=>[l(r,{type:"success",circle:"",class:"action-button",onClick:de},{default:a(()=>[l(s,null,{default:a(()=>[l(w(Q))]),_:1})]),_:1})]),_:1}),l(M,{content:"回到顶部",placement:"left"},{default:a(()=>[l(r,{type:"info",circle:"",class:"action-button",onClick:pe},{default:a(()=>[l(s,null,{default:a(()=>[l(w($e))]),_:1})]),_:1})]),_:1})])])}}}),ot=Ue(et,[["__scopeId","data-v-2eda226d"]]);export{ot as default};
